var wpslAddons=wpslAddons||{};function wpslWidget(){wpslAddons.widget.init()}wpslAddons.widget={init:function(){jQuery("#wpsl-widget-search").length&&"undefined"!=typeof wpslWidgetSettings&&(1==wpslWidgetSettings.autoComplete&&wpslAddons.widget.api.autoComplete(),1!=wpslWidgetSettings.autoLocate||jQuery(".wpsl-search").hasClass("wpsl-widget")||wpslAddons.widget.api.geoLocationRequest(),jQuery("#wpsl-widget-form .wpsl-icon-direction").on("click",function(){wpslAddons.widget.api.geoLocationRequest()})),jQuery("#wpsl-widget-submit").bind("click",function(e){if(!jQuery.trim(jQuery("#wpsl-widget-search").val()).length)return jQuery("#wpsl-widget-search").addClass("wpsl-error").focus(),!1;jQuery("#wpsl-widget-search").removeClass("wpsl-error")})},api:{autoComplete:function(){let e={};if(void 0===wpslWidgetSettings.geocodeComponents||jQuery.isEmptyObject(wpslWidgetSettings.geocodeComponents)||(e.componentRestrictions=wpslWidgetSettings.geocodeComponents),void 0!==wpslWidgetSettings.autoCompleteOptions&&!jQuery.isEmptyObject(wpslWidgetSettings.autoCompleteOptions))for(var t in wpslWidgetSettings.autoCompleteOptions)wpslWidgetSettings.autoCompleteOptions.hasOwnProperty(t)&&(e[t]=wpslWidgetSettings.autoCompleteOptions[t]);const o=document.getElementById("wpsl-widget-search");new google.maps.places.Autocomplete(o,e)},geoLocationRequest:function(){var e,t,o=Number(wpslWidgetSettings.geoLocationTimout);navigator.geolocation&&(e=setInterval(function(){jQuery(".wpsl-icon-direction").toggleClass("wpsl-active-icon")},600),navigator.geolocation.getCurrentPosition(function(o){void 0!==o&&(t=new google.maps.LatLng(o.coords.latitude,o.coords.longitude),clearInterval(e),wpslAddons.widget.api.geocode.reverse(t))},function(t){switch(t.code){case t.PERMISSION_DENIED:alert(wpslGeolocationErrors.denied);break;case t.POSITION_UNAVAILABLE:alert(wpslGeolocationErrors.unavailable);break;case t.TIMEOUT:alert(wpslGeolocationErrors.timeout);break;default:alert(wpslGeolocationErrors.generalError)}clearInterval(e),jQuery(".wpsl-icon-direction").removeClass("wpsl-active-icon")},{maximumAge:6e4,timeout:o,enableHighAccuracy:!0}))},geocode:{reverse:function(e){(new google.maps.Geocoder).geocode({latLng:e},function(e,t){t==google.maps.GeocoderStatus.OK&&(e=wpslAddons.widget.api.geocode.filterResponse(e),jQuery("#wpsl-widget-search").val(e))})},filterResponse:function(e){var t,o,s,i,n=wpslWidgetSettings.filterPattern;if("formatted_address"==n)s=e[0].formatted_address;else{for(i=e[0].address_components.length,o=0;o<i;o++)t=e[0].address_components[o].types,n.indexOf(t[0])>-1&&(s=e[0].address_components[o].long_name);s||(s=e[0].formatted_address)}return s}}}};